import{addFunctionToResizeEvent,getFirstAncestorByClass,}from"../theme/modules/helpers.min.js";document.addEventListener("DOMContentLoaded",function(){renderAllOpenAPI()});function renderAllOpenAPI(){let e=document.getElementsByClassName("sc-openapi-container");for(let t=0;t<e.length;t++)renderOpenAPI(e[t]);if(e.length){const e=function(){let e=document.getElementsByClassName("sc-openapi-iframe");for(let t=0;t<e.length;t++)setOpenAPIHeight(e[t])};addFunctionToResizeEvent(e)}}function renderOpenAPI(e){const n=e.id,s=n+"-error",o=document.getElementById(s);o&&o.remove();const t=document.createElement("iframe"),a="/css/external/swagger-ui/swagger-ui.min.css",r="stylesheet",i="text/css",c="html,body { overflow: hidden; }";t.classList.toggle("sc-openapi-iframe",!0),t.srcdoc=`
    <html>
      <head>
        <style type='${i}'>${c}</style>
        <link rel='${r}' type='${i}' href='${a}'>
      </head>
      <body>
        <div id='${n}'></div>
      </body>
    </html>`,t.height="100%",t.width="100%",t.onload=()=>{const o=getFirstAncestorByClass(e,"sc-openapi-wrapper"),i=new Promise(e=>e());i.then(()=>{SwaggerUIBundle({url:e.getAttribute("openapi-url"),domNode:t.contentWindow.document.getElementById(n),presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]})}).then(()=>{let e=function(){setOpenAPIHeight(t)},n=new MutationObserver(e);n.observe(t.contentWindow.document.documentElement,{childList:!0,subtree:!0})}).then(()=>{o.classList.toggle("is-loading",!1),setOpenAPIHeight(t)}).catch(t=>{const n=document.createElement("div");for(n.classList.add("sc-alert","sc-alert-error"),n.innerHTML=t,n.id=s;e.lastChild;)e.removeChild(e.lastChild);o.classList.toggle("is-loading",!1),o.insertAdjacentElement("afterbegin",n)})},e.appendChild(t)}function setOpenAPIHeight(e){e.style.height=e.contentWindow.document.documentElement.getBoundingClientRect().height+"px"}